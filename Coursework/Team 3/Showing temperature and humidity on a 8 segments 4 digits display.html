<html>
  <head>
    <title>IBCS1-WD - Showing temperature and humidity on a 8 segments 4 digits display</title>
    <link rel="stylesheet" href="static/style.css" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
<p><h1>Showing temperature and humidity on a 8 segments 4 digits display<small> #TomsProjects </small></h1><h1 id="toc0"><a name="DHT11 (Temperature sensor) Class"></a>DHT11 (Temperature sensor) Class</h1>
 
<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.java  {font-family:monospace;}
.java .imp {font-weight: bold; color: red;}
.java .kw1 {color: #000000; font-weight: bold;}
.java .kw2 {color: #000066; font-weight: bold;}
.java .kw3 {color: #003399;}
.java .kw4 {color: #000066; font-weight: bold;}
.java .co1 {color: #666666; font-style: italic;}
.java .co2 {color: #006699;}
.java .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java .coMULTI {color: #666666; font-style: italic;}
.java .es0 {color: #000099; font-weight: bold;}
.java .br0 {color: #009900;}
.java .sy0 {color: #339933;}
.java .st0 {color: #0000ff;}
.java .nu0 {color: #cc66cc;}
.java .me1 {color: #006633;}
.java .me2 {color: #006633;}
.java span.xtra { display:block; }

-->
</style><pre class="java"><span class="kw1">package</span> <span class="co2">sensors</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">com.pi4j.io.gpio.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">static</span> com.<span class="me1">pi4j</span>.<span class="me1">wiringpi</span>.<span class="me1">Gpio</span>.<span class="me1">delay</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">static</span> com.<span class="me1">pi4j</span>.<span class="me1">wiringpi</span>.<span class="me1">Gpio</span>.<span class="me1">delayMicroseconds</span><span class="sy0">;</span>
&nbsp;
<span class="co3">/**
 * @author Hanzhi Zhou
 * Adapted from the C library
 * */</span>
<span class="kw1">public</span> <span class="kw1">class</span> DHT11 <span class="br0">&#123;</span>
    <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw3">String</span> NAME <span class="sy0">=</span> <span class="st0">&quot;Temperature and Humidity Sensor&quot;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">final</span> GpioController gpio <span class="sy0">=</span> GpioFactory.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">final</span> GpioPinDigitalMultipurpose sensor<span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> TIMEOUT <span class="sy0">=</span> <span class="nu0">1000000</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw4">byte</span><span class="br0">&#91;</span><span class="br0">&#93;</span> bits <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw4">byte</span><span class="br0">&#91;</span><span class="nu0">5</span><span class="br0">&#93;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">private</span> <span class="kw4">byte</span> temperature, humidity<span class="sy0">;</span>
&nbsp;
    <span class="kw1">public</span> DHT11<span class="br0">&#40;</span>Pin p<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        sensor <span class="sy0">=</span> gpio.<span class="me1">provisionDigitalMultipurposePin</span><span class="br0">&#40;</span>p, PinMode.<span class="me1">DIGITAL_OUTPUT</span>, PinPullResistance.<span class="me1">PULL_DOWN</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">boolean</span> update<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="co1">// INIT BUFFERVAR TO RECEIVE DATA</span>
        <span class="kw4">short</span> cnt <span class="sy0">=</span> <span class="nu0">7</span><span class="sy0">;</span>
        <span class="kw4">short</span> idx <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp;
        <span class="co1">// EMPTY BUFFER</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">5</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
            bits<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp;
        <span class="co1">// REQUEST SAMPLE</span>
        sensor.<span class="me1">setMode</span><span class="br0">&#40;</span>PinMode.<span class="me1">DIGITAL_OUTPUT</span><span class="br0">&#41;</span><span class="sy0">;</span>
        sensor.<span class="me1">low</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        delay<span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span><span class="sy0">;</span>
        sensor.<span class="me1">high</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        delayMicroseconds<span class="br0">&#40;</span><span class="nu0">40</span><span class="br0">&#41;</span><span class="sy0">;</span>
        sensor.<span class="me1">setMode</span><span class="br0">&#40;</span>PinMode.<span class="me1">DIGITAL_INPUT</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="co1">// GET ACKNOWLEDGE or TIMEOUT</span>
        <span class="kw4">int</span> loopCnt <span class="sy0">=</span> TIMEOUT<span class="sy0">;</span>
        <span class="kw1">while</span> <span class="br0">&#40;</span>sensor.<span class="me1">isState</span><span class="br0">&#40;</span>PinState.<span class="me1">LOW</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>loopCnt<span class="sy0">--</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>
                <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span> <span class="co1">// Timeout</span>
&nbsp;
        loopCnt <span class="sy0">=</span> TIMEOUT<span class="sy0">;</span>
        <span class="kw1">while</span> <span class="br0">&#40;</span>sensor.<span class="me1">isState</span><span class="br0">&#40;</span>PinState.<span class="me1">HIGH</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>loopCnt<span class="sy0">--</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>
                <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span> <span class="co1">// Time out</span>
&nbsp;
        <span class="co1">// READ THE OUTPUT - 40 BITS =&gt; 5 BYTES</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">40</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            loopCnt <span class="sy0">=</span> TIMEOUT<span class="sy0">;</span>
            <span class="kw1">while</span> <span class="br0">&#40;</span>sensor.<span class="me1">isState</span><span class="br0">&#40;</span>PinState.<span class="me1">LOW</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
                <span class="kw1">if</span> <span class="br0">&#40;</span>loopCnt<span class="sy0">--</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>
                    <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span> <span class="co1">// Time out</span>
&nbsp;
            <span class="kw4">long</span> t <span class="sy0">=</span> <span class="kw3">System</span>.<span class="me1">nanoTime</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">/</span> <span class="nu0">1000</span><span class="sy0">;</span>
&nbsp;
            loopCnt <span class="sy0">=</span> TIMEOUT<span class="sy0">;</span>
            <span class="kw1">while</span> <span class="br0">&#40;</span>sensor.<span class="me1">isState</span><span class="br0">&#40;</span>PinState.<span class="me1">HIGH</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
                <span class="kw1">if</span> <span class="br0">&#40;</span>loopCnt<span class="sy0">--</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>
                    <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span> <span class="co1">// Time out</span>
&nbsp;
            <span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw3">System</span>.<span class="me1">nanoTime</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">/</span> <span class="nu0">1000</span> <span class="sy0">-</span> t<span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">40</span><span class="br0">&#41;</span>
                bits<span class="br0">&#91;</span>idx<span class="br0">&#93;</span> <span class="sy0">|=</span> <span class="br0">&#40;</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> cnt<span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>cnt <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>   <span class="co1">// next byte?</span>
            <span class="br0">&#123;</span>
                cnt <span class="sy0">=</span> <span class="nu0">7</span><span class="sy0">;</span>
                idx<span class="sy0">++;</span>
            <span class="br0">&#125;</span> <span class="kw1">else</span>
                cnt<span class="sy0">--;</span>
        <span class="br0">&#125;</span>
        <span class="kw4">byte</span> sum <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">byte</span><span class="br0">&#41;</span> <span class="br0">&#40;</span>bits<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">+</span> bits<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// bits[1] &amp;&amp; bits[3] both 0</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>bits<span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span> <span class="sy0">!=</span> sum<span class="br0">&#41;</span>
            <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span> <span class="co1">// Check sum error</span>
        temperature <span class="sy0">=</span> bits<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="sy0">;</span>
        humidity <span class="sy0">=</span> bits<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">byte</span> getTemperature<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> temperature<span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">byte</span> getHumidity<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> humidity<span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">byte</span><span class="br0">&#91;</span><span class="br0">&#93;</span> getData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="kw1">new</span> <span class="kw4">byte</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span>temperature, humidity<span class="br0">&#125;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;</pre>

<h1 id="toc1"><a name="F3461BH (4 digits 8 segments display)"></a>F3461BH (4 digits 8 segments display)</h1>
 
<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.java  {font-family:monospace;}
.java .imp {font-weight: bold; color: red;}
.java .kw1 {color: #000000; font-weight: bold;}
.java .kw2 {color: #000066; font-weight: bold;}
.java .kw3 {color: #003399;}
.java .kw4 {color: #000066; font-weight: bold;}
.java .co1 {color: #666666; font-style: italic;}
.java .co2 {color: #006699;}
.java .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java .coMULTI {color: #666666; font-style: italic;}
.java .es0 {color: #000099; font-weight: bold;}
.java .br0 {color: #009900;}
.java .sy0 {color: #339933;}
.java .st0 {color: #0000ff;}
.java .nu0 {color: #cc66cc;}
.java .me1 {color: #006633;}
.java .me2 {color: #006633;}
.java span.xtra { display:block; }

-->
</style><pre class="java"><span class="kw1">package</span> <span class="co2">sensors</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">com.pi4j.io.gpio.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">java.util.HashMap</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">static</span> com.<span class="me1">pi4j</span>.<span class="me1">wiringpi</span>.<span class="me1">Gpio</span>.<span class="me1">delay</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">static</span> com.<span class="me1">pi4j</span>.<span class="me1">wiringpi</span>.<span class="me1">Gpio</span>.<span class="me1">delayMicroseconds</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw1">class</span> F3461BH <span class="br0">&#123;</span>
    <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw3">String</span> NAME <span class="sy0">=</span> <span class="st0">&quot;4 Digits 8 Segments Display&quot;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> HashMap<span class="sy0">&lt;</span><span class="kw3">Integer</span>, <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">&gt;</span> Digit_Pin <span class="sy0">=</span> <span class="kw1">new</span> HashMap<span class="sy0">&lt;&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">final</span> GpioController gpio <span class="sy0">=</span> GpioFactory.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">final</span> GpioPinDigitalOutput<span class="br0">&#91;</span><span class="br0">&#93;</span> anodes <span class="sy0">=</span> <span class="kw1">new</span> GpioPinDigitalOutput<span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">final</span> GpioPinDigitalOutput<span class="br0">&#91;</span><span class="br0">&#93;</span> cathodes <span class="sy0">=</span> <span class="kw1">new</span> GpioPinDigitalOutput<span class="br0">&#91;</span><span class="nu0">8</span><span class="br0">&#93;</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">volatile</span> <span class="kw4">boolean</span> flag <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
    <span class="kw1">static</span> <span class="br0">&#123;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">0</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">2</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">true</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">3</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">true</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">4</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">5</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">6</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">7</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">false</span>, <span class="kw2">false</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Digit_Pin.<span class="me1">put</span><span class="br0">&#40;</span><span class="nu0">8</span>, <span class="kw1">new</span> <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span><span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span>, <span class="kw2">true</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> F3461BH<span class="br0">&#40;</span>Pin<span class="br0">&#91;</span><span class="br0">&#93;</span> anodes, Pin<span class="br0">&#91;</span><span class="br0">&#93;</span> cathodes<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>anodes.<span class="me1">length</span> <span class="sy0">!=</span> <span class="nu0">4</span> <span class="sy0">||</span> cathodes.<span class="me1">length</span> <span class="sy0">!=</span> <span class="nu0">8</span><span class="br0">&#41;</span>
            <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">IllegalArgumentException</span><span class="br0">&#40;</span><span class="st0">&quot;Incorrect pin number!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> anodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">this</span>.<span class="me1">anodes</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> gpio.<span class="me1">provisionDigitalOutputPin</span><span class="br0">&#40;</span>anodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>, PinState.<span class="me1">LOW</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> cathodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">this</span>.<span class="me1">cathodes</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> gpio.<span class="me1">provisionDigitalOutputPin</span><span class="br0">&#40;</span>cathodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>, PinState.<span class="me1">LOW</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> showAll<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> anodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            anodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">high</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> cathodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            cathodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">low</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> clear<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        flag <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
        clearAnodes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        clearCathodes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> clearAnodes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> anodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            anodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">low</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> clearCathodes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> cathodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            cathodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">high</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> displayDigit<span class="br0">&#40;</span><span class="kw4">int</span> digit, <span class="kw4">int</span> number<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        clearAnodes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        anodes<span class="br0">&#91;</span>digit<span class="br0">&#93;</span>.<span class="me1">high</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw4">boolean</span><span class="br0">&#91;</span><span class="br0">&#93;</span> v <span class="sy0">=</span> Digit_Pin.<span class="me1">get</span><span class="br0">&#40;</span>number<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> v.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>v<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span>
                cathodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">low</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">else</span>
                cathodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">high</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">public</span> <span class="kw4">void</span> displayDigits<span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span> digits<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>digits.<span class="me1">length</span> <span class="sy0">!=</span> <span class="nu0">4</span><span class="br0">&#41;</span>
            <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">IllegalArgumentException</span><span class="br0">&#40;</span><span class="st0">&quot;Should be exactly 4 digits!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        flag <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
        delay<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">new</span> <span class="kw3">Thread</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
            <span class="kw1">public</span> <span class="kw4">void</span> run<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
                flag <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
                <span class="kw1">while</span> <span class="br0">&#40;</span>flag<span class="br0">&#41;</span><span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> digits.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                        displayDigit<span class="br0">&#40;</span>i, digits<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
                        delay<span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
                    <span class="br0">&#125;</span>
                <span class="br0">&#125;</span>
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>.<span class="me1">start</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;</pre>

<h1 id="toc2"><a name="Main"></a>Main</h1>
 
<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.java  {font-family:monospace;}
.java .imp {font-weight: bold; color: red;}
.java .kw1 {color: #000000; font-weight: bold;}
.java .kw2 {color: #000066; font-weight: bold;}
.java .kw3 {color: #003399;}
.java .kw4 {color: #000066; font-weight: bold;}
.java .co1 {color: #666666; font-style: italic;}
.java .co2 {color: #006699;}
.java .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java .coMULTI {color: #666666; font-style: italic;}
.java .es0 {color: #000099; font-weight: bold;}
.java .br0 {color: #009900;}
.java .sy0 {color: #339933;}
.java .st0 {color: #0000ff;}
.java .nu0 {color: #cc66cc;}
.java .me1 {color: #006633;}
.java .me2 {color: #006633;}
.java span.xtra { display:block; }

-->
</style><pre class="java"><span class="kw1">package</span> <span class="co2">tests</span><span class="sy0">;</span>
&nbsp;
&nbsp;
<span class="kw1">import</span> <span class="co2">com.pi4j.io.gpio.Pin</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">com.pi4j.io.gpio.RaspiPin</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">com.pi4j.wiringpi.Gpio</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">sensors.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">java.util.Arrays</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Scanner</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">static</span> com.<span class="me1">pi4j</span>.<span class="me1">wiringpi</span>.<span class="me1">Gpio</span>.<span class="me1">delay</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw1">class</span> Test <span class="br0">&#123;</span>
    <span class="co1">//        PCF8591 p = new PCF8591(0x48, 1, 5.0);</span>
<span class="co1">//</span>
<span class="co1">//        Scanner in = new Scanner(System.in);</span>
<span class="co1">//        while (true){</span>
<span class="co1">////            p.write(new byte[]{Byte.parseByte(in.nextLine()), Byte.parseByte(in.nextLine())});</span>
<span class="co1">////            p.write((byte)(Integer.parseInt(in.nextLine())));</span>
<span class="co1">//            Thread.sleep(500);</span>
<span class="co1">//            System.out.println(Arrays.toString(p.getData()));</span>
<span class="co1">//            System.out.println(PCF8591.getTemperature(p.getData(1)));</span>
<span class="co1">//        }</span>
    <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><span class="kw3">String</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arg<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        F3461BH f <span class="sy0">=</span> <span class="kw1">new</span> F3461BH<span class="br0">&#40;</span>
                <span class="kw1">new</span> Pin<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span>RaspiPin.<span class="me1">GPIO_00</span>, RaspiPin.<span class="me1">GPIO_01</span>, RaspiPin.<span class="me1">GPIO_02</span>, RaspiPin.<span class="me1">GPIO_03</span><span class="br0">&#125;</span>,
                <span class="kw1">new</span> Pin<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span>RaspiPin.<span class="me1">GPIO_21</span>, RaspiPin.<span class="me1">GPIO_22</span>, RaspiPin.<span class="me1">GPIO_23</span>, RaspiPin.<span class="me1">GPIO_24</span>,
                        RaspiPin.<span class="me1">GPIO_25</span>, RaspiPin.<span class="me1">GPIO_26</span>, RaspiPin.<span class="me1">GPIO_27</span>, RaspiPin.<span class="me1">GPIO_28</span><span class="br0">&#125;</span>
        <span class="br0">&#41;</span><span class="sy0">;</span>
        f.<span class="me1">showAll</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        delay<span class="br0">&#40;</span><span class="nu0">1000</span><span class="br0">&#41;</span><span class="sy0">;</span>
        f.<span class="me1">clear</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw4">byte</span><span class="br0">&#91;</span><span class="br0">&#93;</span> data <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
        <span class="kw4">int</span> temperature<span class="sy0">;</span>
        <span class="kw4">int</span> humidity<span class="sy0">;</span>
        DHT11 sensor <span class="sy0">=</span> <span class="kw1">new</span> DHT11<span class="br0">&#40;</span>RaspiPin.<span class="me1">GPIO_29</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//        HC_SR04 h = new HC_SR04(RaspiPin.GPIO_04, RaspiPin.GPIO_05);</span>
<span class="co1">//        HumanInfrared j = new HumanInfrared(RaspiPin.GPIO_04);</span>
        <span class="kw1">while</span> <span class="br0">&#40;</span><span class="kw2">true</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            sensor.<span class="me1">update</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            data <span class="sy0">=</span> sensor.<span class="me1">getData</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="kw3">Arrays</span>.<span class="me1">toString</span><span class="br0">&#40;</span>data<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            temperature <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span> data<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>
            humidity <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span> data<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
            f.<span class="me1">displayDigits</span><span class="br0">&#40;</span><span class="kw1">new</span> <span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#123;</span>temperature <span class="sy0">/</span> <span class="nu0">10</span>, temperature <span class="sy0">%</span> <span class="nu0">10</span>, humidity <span class="sy0">/</span> <span class="nu0">10</span>, humidity <span class="sy0">%</span> <span class="nu0">10</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//            double d = h.getDistance();</span>
<span class="co1">//            System.out.println(d);</span>
<span class="co1">//            int dd = (int) d;</span>
<span class="co1">//            int b = dd / 100;</span>
<span class="co1">//            int c = (dd % 100) / 10;</span>
<span class="co1">//            int e = dd % 10;</span>
<span class="co1">//            f.displayDigits(new int[]{b, c, e, });</span>
            delay<span class="br0">&#40;</span><span class="nu0">5000</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;</pre>

</div>
      <h2>Discussions</h2></hr>
      <div id="share-list">
    </div>
  </body>
</html>